{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useCallback } from 'react';\nimport { useSearchParams } from 'react-router-dom';\n// –ì–ª–æ–±–∞–ª—å–Ω–∞—è Map –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ –≤ UI\nif (!window.filterStates) {\n  window.filterStates = new Map();\n}\n\n// –ì–ª–æ–±–∞–ª—å–Ω—ã–π Set –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ —è–≤–Ω–æ —É–¥–∞–ª–µ–Ω—ã\nif (!window.removedFilters) {\n  window.removedFilters = new Set();\n}\n\n// –ì–ª–æ–±–∞–ª—å–Ω—ã–π Set –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ —É–¥–∞–ª–µ–Ω—ã –∏–∑ URL\nif (!window.urlRemovedFilters) {\n  window.urlRemovedFilters = new Set();\n}\nexport const useUrlFilters = (activeFilters, onFilterChange, filterCounts) => {\n  _s();\n  var _window$places2, _window$places4, _window$places6;\n  const [searchParams, setSearchParams] = useSearchParams();\n\n  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–¥—Å—á–µ—Ç–∞ –±–∞–∑–æ–≤—ã—Ö —Å—á–µ—Ç—á–∏–∫–æ–≤\n  const calculateBaseCounts = places => {\n    console.log('üìä –ü–æ–¥—Å—á–µ—Ç –±–∞–∑–æ–≤—ã—Ö —Å—á–µ—Ç—á–∏–∫–æ–≤');\n    const counts = {};\n    places.forEach(place => {\n      place.attributes.forEach(attr => {\n        counts[attr] = (counts[attr] || 0) + 1;\n      });\n    });\n    console.log('üìä –ë–∞–∑–æ–≤—ã–µ —Å—á–µ—Ç—á–∏–∫–∏:', counts);\n    return counts;\n  };\n\n  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏\n  const applyFiltersSequentially = (places, filters, baseCounts) => {\n    console.log('üîÑ –ü—Ä–∏–º–µ–Ω—è–µ–º —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ:', filters);\n    const result = {\n      validFilters: [],\n      counts: {\n        ...baseCounts\n      },\n      filteredPlaces: places\n    };\n    for (const filter of filters) {\n      console.log(`\\nüìå –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–∏–ª—å—Ç—Ä: ${filter}`);\n\n      // –§–∏–ª—å—Ç—Ä—É–µ–º –º–µ—Å—Ç–∞ –ø–æ —Ç–µ–∫—É—â–µ–º—É —Ñ–∏–ª—å—Ç—Ä—É\n      const placesWithFilter = result.filteredPlaces.filter(place => place.attributes.includes(filter));\n      console.log(`üìä –ù–∞–π–¥–µ–Ω–æ –º–µ—Å—Ç: ${placesWithFilter.length}`);\n      if (placesWithFilter.length > 0) {\n        // –§–∏–ª—å—Ç—Ä –≤–∞–ª–∏–¥–µ–Ω\n        console.log(`‚úÖ –§–∏–ª—å—Ç—Ä ${filter} –≤–∞–ª–∏–¥–µ–Ω`);\n        result.validFilters.push(filter);\n        result.filteredPlaces = placesWithFilter;\n\n        // –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫–∏ –¥–ª—è –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è —Ñ–∏–ª—å—Ç—Ä–æ–≤\n        const remainingFilters = Object.keys(result.counts).filter(attr => !result.validFilters.includes(attr));\n        console.log('üîÑ –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫–∏ –¥–ª—è:', remainingFilters);\n        remainingFilters.forEach(attr => {\n          result.counts[attr] = placesWithFilter.filter(place => place.attributes.includes(attr)).length;\n        });\n      } else {\n        // –§–∏–ª—å—Ç—Ä –Ω–µ–≤–∞–ª–∏–¥–µ–Ω\n        console.log(`‚ùå –§–∏–ª—å—Ç—Ä ${filter} –Ω–µ–≤–∞–ª–∏–¥–µ–Ω, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º`);\n        result.counts[filter] = 0;\n      }\n    }\n    console.log('\\nüìà –†–µ–∑—É–ª—å—Ç–∞—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:');\n    console.log('–í–∞–ª–∏–¥–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã:', result.validFilters);\n    console.log('–ò—Ç–æ–≥–æ–≤—ã–µ —Å—á–µ—Ç—á–∏–∫–∏:', result.counts);\n    return result;\n  };\n\n  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä—è–º–æ–≥–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è URL —Å –Ω–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∑–∞–ø—è—Ç—ã–º–∏\n  const setFiltersInUrl = useCallback(filters => {\n    if (!filters || filters.length === 0) {\n      // –£–¥–∞–ª—è–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä filter –∏–∑ URL\n      setSearchParams(new URLSearchParams());\n      return;\n    }\n\n    // –ò—Å–ø–æ–ª—å–∑—É–µ–º history API –¥–ª—è –ø—Ä—è–º–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è URL –±–µ–∑ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—è—Ç—ã—Ö\n    const path = window.location.pathname;\n    const newUrl = `${path}?filter=${filters.join(',')}`;\n    window.history.pushState({}, '', newUrl);\n\n    // –ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ —Å–æ–∑–¥–∞–µ–º —Å–æ–±—ã—Ç–∏–µ, —á—Ç–æ–±—ã React Router –æ–±–Ω–∞—Ä—É–∂–∏–ª –∏–∑–º–µ–Ω–µ–Ω–∏–µ\n    window.dispatchEvent(new Event('popstate'));\n  }, [setSearchParams]);\n\n  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π URL\n  useEffect(() => {\n    var _window$places;\n    if (!((_window$places = window.places) !== null && _window$places !== void 0 && _window$places.length)) {\n      console.log('‚è≥ –ñ–¥–µ–º –∑–∞–≥—Ä—É–∑–∫—É –º–µ—Å—Ç...');\n      return;\n    }\n\n    // –ü–æ–ª—É—á–∞–µ–º —Ñ–∏–ª—å—Ç—Ä—ã –∏–∑ URL\n    const filtersFromUrl = searchParams.get('filter');\n    console.log('\\nüåê –ü–æ–ª—É—á–µ–Ω—ã —Ñ–∏–ª—å—Ç—Ä—ã –∏–∑ URL:', filtersFromUrl);\n\n    // –ï—Å–ª–∏ URL –ø—É—Å—Ç–æ–π, —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã\n    if (!filtersFromUrl) {\n      console.log('üßπ URL –ø—É—Å—Ç–æ–π, —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–∏–ª—å—Ç—Ä—ã');\n      window.filterStates.clear();\n      onFilterChange([]);\n      return;\n    }\n\n    // –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏–∑ URL –∏ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤—ã–≤–∞–µ–º —É–¥–∞–ª–µ–Ω–Ω—ã–µ\n    const filters = filtersFromUrl.split(',').filter(f => {\n      // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –±—ã–ª –ª–∏ —Ñ–∏–ª—å—Ç—Ä —Ä–∞–Ω–µ–µ —É–¥–∞–ª–µ–Ω –∏–∑ URL\n      if (window.urlRemovedFilters.has(f)) {\n        console.log('üö´ –§–∏–ª—å—Ç—Ä –±—ã–ª —Ä–∞–Ω–µ–µ —É–¥–∞–ª–µ–Ω –∏–∑ URL, –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º:', f);\n        return false;\n      }\n      return Boolean(f);\n    });\n\n    // –ï—Å–ª–∏ –≤—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã –±—ã–ª–∏ —É–¥–∞–ª–µ–Ω—ã, –æ—á–∏—â–∞–µ–º URL\n    if (filters.length === 0) {\n      console.log('üßπ –í—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã –≤ URL –±—ã–ª–∏ —Ä–∞–Ω–µ–µ —É–¥–∞–ª–µ–Ω—ã, –æ—á–∏—â–∞–µ–º URL');\n      setSearchParams(new URLSearchParams());\n      window.filterStates.clear();\n      onFilterChange([]);\n      return;\n    }\n\n    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ–ª—å–∫–æ —Ñ–∏–ª—å—Ç—Ä—ã, –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –≤ URL\n    const baseCounts = calculateBaseCounts(window.places);\n    const {\n      validFilters\n    } = applyFiltersSequentially(window.places, filters, baseCounts);\n\n    // –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω—ã –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã, –æ–±–Ω–æ–≤–ª—è–µ–º URL\n    if (validFilters.join(',') !== filters.join(',')) {\n      console.log('üîÑ –û–±–Ω–æ–≤–ª—è–µ–º URL, —É–¥–∞–ª—è—è –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã');\n\n      // –î–æ–±–∞–≤–ª—è–µ–º –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –≤ —Å–ø–∏—Å–æ–∫ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –∏–∑ URL\n      filters.forEach(f => {\n        if (!validFilters.includes(f)) {\n          window.urlRemovedFilters.add(f);\n          console.log('üö´ –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ —Å–ø–∏—Å–æ–∫ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –∏–∑ URL:', f);\n        }\n      });\n\n      // –ò—Å–ø–æ–ª—å–∑—É–µ–º –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ URL\n      setFiltersInUrl(validFilters.length > 0 ? validFilters : null);\n\n      // –î–∞–ª—å–Ω–µ–π—à–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—É—Å–∫–µ useEffect\n      return;\n    }\n\n    // –û–±–Ω–æ–≤–ª—è–µ–º UI-—Å–æ—Å—Ç–æ—è–Ω–∏–µ\n    console.log('üîÑ –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤');\n    window.filterStates.clear();\n    validFilters.forEach(filter => {\n      window.filterStates.set(filter, true);\n    });\n\n    // –í—ã–∑—ã–≤–∞–µ–º –∫–æ–ª–ª–±—ç–∫ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ\n    onFilterChange(validFilters);\n  }, [searchParams, setSearchParams, onFilterChange, (_window$places2 = window.places) === null || _window$places2 === void 0 ? void 0 : _window$places2.length, setFiltersInUrl]);\n\n  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –ø–æ —Ñ–∏–ª—å—Ç—Ä—É\n  const toggleFilter = useCallback(filter => {\n    var _window$places3;\n    if (!((_window$places3 = window.places) !== null && _window$places3 !== void 0 && _window$places3.length)) {\n      console.log('‚ö†Ô∏è –ú–µ—Å—Ç–∞ –µ—â–µ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã');\n      return;\n    }\n    console.log('\\nüñ±Ô∏è –ö–ª–∏–∫ –ø–æ —Ñ–∏–ª—å—Ç—Ä—É:', filter);\n\n    // –ü–æ–ª—É—á–∞–µ–º —Ç–æ–ª—å–∫–æ —Ñ–∏–ª—å—Ç—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ —è–≤–Ω–æ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ —Ç–µ–∫—É—â–µ–º URL\n    const urlFilter = searchParams.get('filter') || '';\n    const currentFilters = urlFilter ? urlFilter.split(',').filter(Boolean) : [];\n    const isActive = currentFilters.includes(filter);\n    if (isActive) {\n      // –£–¥–∞–ª—è–µ–º —Ñ–∏–ª—å—Ç—Ä –∏–∑ —Å–ø–∏—Å–∫–∞ —Ç–µ–∫—É—â–∏—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤\n      console.log('‚ûñ –£–¥–∞–ª—è–µ–º —Ñ–∏–ª—å—Ç—Ä:', filter);\n      const newFilters = currentFilters.filter(f => f !== filter);\n\n      // –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—â–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ\n      window.filterStates.clear();\n      if (newFilters.length > 0) {\n        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è —Ñ–∏–ª—å—Ç—Ä–æ–≤\n        newFilters.forEach(f => window.filterStates.set(f, true));\n\n        // –ò—Å–ø–æ–ª—å–∑—É–µ–º –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é –≤–º–µ—Å—Ç–æ setSearchParams\n        setFiltersInUrl(newFilters);\n      } else {\n        // –ò—Å–ø–æ–ª—å–∑—É–µ–º –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é\n        setFiltersInUrl(null);\n      }\n    } else {\n      // –í UI –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä, –µ—Å–ª–∏ –æ–Ω —Å–æ–≤–º–µ—Å—Ç–∏–º —Å —Ç–µ–∫—É—â–∏–º–∏\n\n      // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–∞\n      console.log('‚ûï –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–∞:', filter);\n\n      // –ï—Å–ª–∏ —Ñ–∏–ª—å—Ç—Ä –¥–æ—Å—Ç—É–ø–µ–Ω (—Å—á–µ—Ç—á–∏–∫ > 0), —Ç–æ –µ–≥–æ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å\n      if (filterCounts[filter] && filterCounts[filter] > 0) {\n        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å–æ–≤–º–µ—Å—Ç–∏–º –ª–∏ –Ω–æ–≤—ã–π —Ñ–∏–ª—å—Ç—Ä —Å —Ç–µ–∫—É—â–∏–º–∏\n        const baseCounts = calculateBaseCounts(window.places);\n        const newFilterList = [...currentFilters, filter];\n\n        // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ\n        const {\n          validFilters\n        } = applyFiltersSequentially(window.places, newFilterList, baseCounts);\n\n        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –Ω–æ–≤—ã–π —Ñ–∏–ª—å—Ç—Ä –æ—Å—Ç–∞–ª—Å—è –≤–∞–ª–∏–¥–Ω—ã–º –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏\n        if (validFilters.includes(filter)) {\n          console.log('‚úÖ –§–∏–ª—å—Ç—Ä –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:', filter);\n\n          // –û—á–∏—â–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–∞–ª–∏–¥–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤\n          window.filterStates.clear();\n          validFilters.forEach(f => window.filterStates.set(f, true));\n\n          // –ò—Å–ø–æ–ª—å–∑—É–µ–º –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é\n          setFiltersInUrl(validFilters);\n        } else {\n          console.log('‚ùå –§–∏–ª—å—Ç—Ä –Ω–µ–ª—å–∑—è –¥–æ–±–∞–≤–∏—Ç—å, –Ω–µ —Å–æ–≤–º–µ—Å—Ç–∏–º —Å —Ç–µ–∫—É—â–∏–º–∏:', filter);\n        }\n      } else {\n        console.log('‚ùå –§–∏–ª—å—Ç—Ä –Ω–µ–ª—å–∑—è –¥–æ–±–∞–≤–∏—Ç—å, —Å—á–µ—Ç—á–∏–∫ = 0:', filter);\n      }\n    }\n  }, [searchParams, setSearchParams, (_window$places4 = window.places) === null || _window$places4 === void 0 ? void 0 : _window$places4.length, filterCounts, setFiltersInUrl]);\n\n  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Å–±—Ä–æ—Å–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤\n  const resetFilters = useCallback(() => {\n    console.log('üîÑ –°–±—Ä–æ—Å –≤—Å–µ—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤');\n    // –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—â–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ\n    window.filterStates.clear();\n\n    // –û—á–∏—â–∞–µ–º —Ç–∞–∫–∂–µ —Å–ø–∏—Å–æ–∫ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤\n    window.removedFilters.clear();\n    window.urlRemovedFilters.clear();\n\n    // –ò—Å–ø–æ–ª—å–∑—É–µ–º –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é\n    setFiltersInUrl(null);\n  }, [setSearchParams, setFiltersInUrl]);\n  return {\n    toggleFilter,\n    isFilterAvailable: useCallback(filter => {\n      var _window$places5;\n      if (!((_window$places5 = window.places) !== null && _window$places5 !== void 0 && _window$places5.length)) return false;\n\n      // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É —Ñ–∏–ª—å—Ç—Ä–∞ –º–µ—Å—Ç–∞ –≤ —Ç–µ–∫—É—â–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ\n      const urlFilter = searchParams.get('filter') || '';\n      const currentFilters = urlFilter ? urlFilter.split(',').filter(Boolean) : [];\n\n      // –ï—Å–ª–∏ —Ñ–∏–ª—å—Ç—Ä —É–∂–µ –∞–∫—Ç–∏–≤–µ–Ω, –æ–Ω –¥–æ—Å—Ç—É–ø–µ–Ω\n      if (currentFilters.includes(filter)) {\n        return true;\n      }\n\n      // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–º —Å—á–µ—Ç—á–∏–∫–∞–º\n      // filterCounts —É–∂–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–µ –∞–∫—Ç–∏–≤–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã\n      return filterCounts[filter] > 0;\n    }, [filterCounts, searchParams, (_window$places6 = window.places) === null || _window$places6 === void 0 ? void 0 : _window$places6.length]),\n    resetFilters\n  };\n};\n\n// –î–æ–±–∞–≤–ª—è–µ–º —Ç–∏–ø—ã –¥–ª—è window\n_s(useUrlFilters, \"Zsd64lVSafQTZGB0rDgPd+I96lM=\", false, function () {\n  return [useSearchParams];\n});\nexport default useUrlFilters;","map":{"version":3,"names":["useEffect","useCallback","useSearchParams","window","filterStates","Map","removedFilters","Set","urlRemovedFilters","useUrlFilters","activeFilters","onFilterChange","filterCounts","_s","_window$places2","_window$places4","_window$places6","searchParams","setSearchParams","calculateBaseCounts","places","console","log","counts","forEach","place","attributes","attr","applyFiltersSequentially","filters","baseCounts","result","validFilters","filteredPlaces","filter","placesWithFilter","includes","length","push","remainingFilters","Object","keys","setFiltersInUrl","URLSearchParams","path","location","pathname","newUrl","join","history","pushState","dispatchEvent","Event","_window$places","filtersFromUrl","get","clear","split","f","has","Boolean","add","set","toggleFilter","_window$places3","urlFilter","currentFilters","isActive","newFilters","newFilterList","resetFilters","isFilterAvailable","_window$places5"],"sources":["/Users/borvel/Documents/GitHub/places-app/src/hooks/useUrlFilters.ts"],"sourcesContent":["import { useEffect, useCallback, useRef } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport { Place } from '../types/places';\n\n// –ì–ª–æ–±–∞–ª—å–Ω–∞—è Map –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ –≤ UI\nif (!window.filterStates) {\n  window.filterStates = new Map<string, boolean>();\n}\n\n// –ì–ª–æ–±–∞–ª—å–Ω—ã–π Set –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ —è–≤–Ω–æ —É–¥–∞–ª–µ–Ω—ã\nif (!window.removedFilters) {\n  window.removedFilters = new Set<string>();\n}\n\n// –ì–ª–æ–±–∞–ª—å–Ω—ã–π Set –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ —É–¥–∞–ª–µ–Ω—ã –∏–∑ URL\nif (!window.urlRemovedFilters) {\n  window.urlRemovedFilters = new Set<string>();\n}\n\nexport const useUrlFilters = (\n  activeFilters: string[],\n  onFilterChange: (filters: string[]) => void,\n  filterCounts: Record<string, number>\n) => {\n  const [searchParams, setSearchParams] = useSearchParams();\n\n  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–¥—Å—á–µ—Ç–∞ –±–∞–∑–æ–≤—ã—Ö —Å—á–µ—Ç—á–∏–∫–æ–≤\n  const calculateBaseCounts = (places: Place[]) => {\n    console.log('üìä –ü–æ–¥—Å—á–µ—Ç –±–∞–∑–æ–≤—ã—Ö —Å—á–µ—Ç—á–∏–∫–æ–≤');\n    const counts: Record<string, number> = {};\n    \n    places.forEach(place => {\n      place.attributes.forEach(attr => {\n        counts[attr] = (counts[attr] || 0) + 1;\n      });\n    });\n    \n    console.log('üìä –ë–∞–∑–æ–≤—ã–µ —Å—á–µ—Ç—á–∏–∫–∏:', counts);\n    return counts;\n  };\n\n  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏\n  const applyFiltersSequentially = (\n    places: Place[],\n    filters: string[],\n    baseCounts: Record<string, number>\n  ) => {\n    console.log('üîÑ –ü—Ä–∏–º–µ–Ω—è–µ–º —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ:', filters);\n    \n    const result = {\n      validFilters: [] as string[],\n      counts: { ...baseCounts },\n      filteredPlaces: places\n    };\n\n    for (const filter of filters) {\n      console.log(`\\nüìå –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–∏–ª—å—Ç—Ä: ${filter}`);\n      \n      // –§–∏–ª—å—Ç—Ä—É–µ–º –º–µ—Å—Ç–∞ –ø–æ —Ç–µ–∫—É—â–µ–º—É —Ñ–∏–ª—å—Ç—Ä—É\n      const placesWithFilter = result.filteredPlaces.filter(\n        place => place.attributes.includes(filter)\n      );\n      \n      console.log(`üìä –ù–∞–π–¥–µ–Ω–æ –º–µ—Å—Ç: ${placesWithFilter.length}`);\n\n      if (placesWithFilter.length > 0) {\n        // –§–∏–ª—å—Ç—Ä –≤–∞–ª–∏–¥–µ–Ω\n        console.log(`‚úÖ –§–∏–ª—å—Ç—Ä ${filter} –≤–∞–ª–∏–¥–µ–Ω`);\n        result.validFilters.push(filter);\n        result.filteredPlaces = placesWithFilter;\n\n        // –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫–∏ –¥–ª—è –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è —Ñ–∏–ª—å—Ç—Ä–æ–≤\n        const remainingFilters = Object.keys(result.counts)\n          .filter(attr => !result.validFilters.includes(attr));\n\n        console.log('üîÑ –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫–∏ –¥–ª—è:', remainingFilters);\n        \n        remainingFilters.forEach(attr => {\n          result.counts[attr] = placesWithFilter.filter(\n            place => place.attributes.includes(attr)\n          ).length;\n        });\n      } else {\n        // –§–∏–ª—å—Ç—Ä –Ω–µ–≤–∞–ª–∏–¥–µ–Ω\n        console.log(`‚ùå –§–∏–ª—å—Ç—Ä ${filter} –Ω–µ–≤–∞–ª–∏–¥–µ–Ω, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º`);\n        result.counts[filter] = 0;\n      }\n    }\n\n    console.log('\\nüìà –†–µ–∑—É–ª—å—Ç–∞—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:');\n    console.log('–í–∞–ª–∏–¥–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã:', result.validFilters);\n    console.log('–ò—Ç–æ–≥–æ–≤—ã–µ —Å—á–µ—Ç—á–∏–∫–∏:', result.counts);\n    \n    return result;\n  };\n\n  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä—è–º–æ–≥–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è URL —Å –Ω–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∑–∞–ø—è—Ç—ã–º–∏\n  const setFiltersInUrl = useCallback((filters: string[] | null) => {\n    if (!filters || filters.length === 0) {\n      // –£–¥–∞–ª—è–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä filter –∏–∑ URL\n      setSearchParams(new URLSearchParams());\n      return;\n    }\n\n    // –ò—Å–ø–æ–ª—å–∑—É–µ–º history API –¥–ª—è –ø—Ä—è–º–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è URL –±–µ–∑ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—è—Ç—ã—Ö\n    const path = window.location.pathname;\n    const newUrl = `${path}?filter=${filters.join(',')}`;\n    window.history.pushState({}, '', newUrl);\n    \n    // –ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ —Å–æ–∑–¥–∞–µ–º —Å–æ–±—ã—Ç–∏–µ, —á—Ç–æ–±—ã React Router –æ–±–Ω–∞—Ä—É–∂–∏–ª –∏–∑–º–µ–Ω–µ–Ω–∏–µ\n    window.dispatchEvent(new Event('popstate'));\n  }, [setSearchParams]);\n\n  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π URL\n  useEffect(() => {\n    if (!window.places?.length) {\n      console.log('‚è≥ –ñ–¥–µ–º –∑–∞–≥—Ä—É–∑–∫—É –º–µ—Å—Ç...');\n      return;\n    }\n\n    // –ü–æ–ª—É—á–∞–µ–º —Ñ–∏–ª—å—Ç—Ä—ã –∏–∑ URL\n    const filtersFromUrl = searchParams.get('filter');\n    console.log('\\nüåê –ü–æ–ª—É—á–µ–Ω—ã —Ñ–∏–ª—å—Ç—Ä—ã –∏–∑ URL:', filtersFromUrl);\n\n    // –ï—Å–ª–∏ URL –ø—É—Å—Ç–æ–π, —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã\n    if (!filtersFromUrl) {\n      console.log('üßπ URL –ø—É—Å—Ç–æ–π, —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–∏–ª—å—Ç—Ä—ã');\n      window.filterStates.clear();\n      onFilterChange([]);\n      return;\n    }\n\n    // –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏–∑ URL –∏ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤—ã–≤–∞–µ–º —É–¥–∞–ª–µ–Ω–Ω—ã–µ\n    const filters = filtersFromUrl.split(',').filter(f => {\n      // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –±—ã–ª –ª–∏ —Ñ–∏–ª—å—Ç—Ä —Ä–∞–Ω–µ–µ —É–¥–∞–ª–µ–Ω –∏–∑ URL\n      if (window.urlRemovedFilters.has(f)) {\n        console.log('üö´ –§–∏–ª—å—Ç—Ä –±—ã–ª —Ä–∞–Ω–µ–µ —É–¥–∞–ª–µ–Ω –∏–∑ URL, –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º:', f);\n        return false;\n      }\n      return Boolean(f);\n    });\n    \n    // –ï—Å–ª–∏ –≤—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã –±—ã–ª–∏ —É–¥–∞–ª–µ–Ω—ã, –æ—á–∏—â–∞–µ–º URL\n    if (filters.length === 0) {\n      console.log('üßπ –í—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã –≤ URL –±—ã–ª–∏ —Ä–∞–Ω–µ–µ —É–¥–∞–ª–µ–Ω—ã, –æ—á–∏—â–∞–µ–º URL');\n      setSearchParams(new URLSearchParams());\n      window.filterStates.clear();\n      onFilterChange([]);\n      return;\n    }\n    \n    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ–ª—å–∫–æ —Ñ–∏–ª—å—Ç—Ä—ã, –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –≤ URL\n    const baseCounts = calculateBaseCounts(window.places);\n    const { validFilters } = applyFiltersSequentially(\n      window.places,\n      filters,\n      baseCounts\n    );\n\n    // –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω—ã –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã, –æ–±–Ω–æ–≤–ª—è–µ–º URL\n    if (validFilters.join(',') !== filters.join(',')) {\n      console.log('üîÑ –û–±–Ω–æ–≤–ª—è–µ–º URL, —É–¥–∞–ª—è—è –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã');\n      \n      // –î–æ–±–∞–≤–ª—è–µ–º –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –≤ —Å–ø–∏—Å–æ–∫ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –∏–∑ URL\n      filters.forEach(f => {\n        if (!validFilters.includes(f)) {\n          window.urlRemovedFilters.add(f);\n          console.log('üö´ –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ —Å–ø–∏—Å–æ–∫ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –∏–∑ URL:', f);\n        }\n      });\n      \n      // –ò—Å–ø–æ–ª—å–∑—É–µ–º –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ URL\n      setFiltersInUrl(validFilters.length > 0 ? validFilters : null);\n      \n      // –î–∞–ª—å–Ω–µ–π—à–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—É—Å–∫–µ useEffect\n      return;\n    }\n\n    // –û–±–Ω–æ–≤–ª—è–µ–º UI-—Å–æ—Å—Ç–æ—è–Ω–∏–µ\n    console.log('üîÑ –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤');\n    window.filterStates.clear();\n    validFilters.forEach(filter => {\n      window.filterStates.set(filter, true);\n    });\n\n    // –í—ã–∑—ã–≤–∞–µ–º –∫–æ–ª–ª–±—ç–∫ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ\n    onFilterChange(validFilters);\n  }, [searchParams, setSearchParams, onFilterChange, window.places?.length, setFiltersInUrl]);\n\n  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –ø–æ —Ñ–∏–ª—å—Ç—Ä—É\n  const toggleFilter = useCallback((filter: string) => {\n    if (!window.places?.length) {\n      console.log('‚ö†Ô∏è –ú–µ—Å—Ç–∞ –µ—â–µ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã');\n      return;\n    }\n\n    console.log('\\nüñ±Ô∏è –ö–ª–∏–∫ –ø–æ —Ñ–∏–ª—å—Ç—Ä—É:', filter);\n    \n    // –ü–æ–ª—É—á–∞–µ–º —Ç–æ–ª—å–∫–æ —Ñ–∏–ª—å—Ç—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ —è–≤–Ω–æ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ —Ç–µ–∫—É—â–µ–º URL\n    const urlFilter = searchParams.get('filter') || '';\n    const currentFilters = urlFilter ? urlFilter.split(',').filter(Boolean) : [];\n    const isActive = currentFilters.includes(filter);\n    \n    if (isActive) {\n      // –£–¥–∞–ª—è–µ–º —Ñ–∏–ª—å—Ç—Ä –∏–∑ —Å–ø–∏—Å–∫–∞ —Ç–µ–∫—É—â–∏—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤\n      console.log('‚ûñ –£–¥–∞–ª—è–µ–º —Ñ–∏–ª—å—Ç—Ä:', filter);\n      const newFilters = currentFilters.filter(f => f !== filter);\n      \n      // –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—â–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ\n      window.filterStates.clear();\n      \n      if (newFilters.length > 0) {\n        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è —Ñ–∏–ª—å—Ç—Ä–æ–≤\n        newFilters.forEach(f => window.filterStates.set(f, true));\n        \n        // –ò—Å–ø–æ–ª—å–∑—É–µ–º –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é –≤–º–µ—Å—Ç–æ setSearchParams\n        setFiltersInUrl(newFilters);\n      } else {\n        // –ò—Å–ø–æ–ª—å–∑—É–µ–º –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é\n        setFiltersInUrl(null);\n      }\n    } else {\n      // –í UI –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä, –µ—Å–ª–∏ –æ–Ω —Å–æ–≤–º–µ—Å—Ç–∏–º —Å —Ç–µ–∫—É—â–∏–º–∏\n      \n      // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–∞\n      console.log('‚ûï –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–∞:', filter);\n      \n      // –ï—Å–ª–∏ —Ñ–∏–ª—å—Ç—Ä –¥–æ—Å—Ç—É–ø–µ–Ω (—Å—á–µ—Ç—á–∏–∫ > 0), —Ç–æ –µ–≥–æ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å\n      if (filterCounts[filter] && filterCounts[filter] > 0) {\n        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å–æ–≤–º–µ—Å—Ç–∏–º –ª–∏ –Ω–æ–≤—ã–π —Ñ–∏–ª—å—Ç—Ä —Å —Ç–µ–∫—É—â–∏–º–∏\n        const baseCounts = calculateBaseCounts(window.places);\n        const newFilterList = [...currentFilters, filter];\n        \n        // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ\n        const { validFilters } = applyFiltersSequentially(\n          window.places,\n          newFilterList,\n          baseCounts\n        );\n        \n        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –Ω–æ–≤—ã–π —Ñ–∏–ª—å—Ç—Ä –æ—Å—Ç–∞–ª—Å—è –≤–∞–ª–∏–¥–Ω—ã–º –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏\n        if (validFilters.includes(filter)) {\n          console.log('‚úÖ –§–∏–ª—å—Ç—Ä –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:', filter);\n          \n          // –û—á–∏—â–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–∞–ª–∏–¥–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤\n          window.filterStates.clear();\n          validFilters.forEach(f => window.filterStates.set(f, true));\n          \n          // –ò—Å–ø–æ–ª—å–∑—É–µ–º –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é\n          setFiltersInUrl(validFilters);\n        } else {\n          console.log('‚ùå –§–∏–ª—å—Ç—Ä –Ω–µ–ª—å–∑—è –¥–æ–±–∞–≤–∏—Ç—å, –Ω–µ —Å–æ–≤–º–µ—Å—Ç–∏–º —Å —Ç–µ–∫—É—â–∏–º–∏:', filter);\n        }\n      } else {\n        console.log('‚ùå –§–∏–ª—å—Ç—Ä –Ω–µ–ª—å–∑—è –¥–æ–±–∞–≤–∏—Ç—å, —Å—á–µ—Ç—á–∏–∫ = 0:', filter);\n      }\n    }\n  }, [searchParams, setSearchParams, window.places?.length, filterCounts, setFiltersInUrl]);\n\n  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Å–±—Ä–æ—Å–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤\n  const resetFilters = useCallback(() => {\n    console.log('üîÑ –°–±—Ä–æ—Å –≤—Å–µ—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤');\n    // –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—â–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ\n    window.filterStates.clear();\n    \n    // –û—á–∏—â–∞–µ–º —Ç–∞–∫–∂–µ —Å–ø–∏—Å–æ–∫ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤\n    window.removedFilters.clear();\n    window.urlRemovedFilters.clear();\n    \n    // –ò—Å–ø–æ–ª—å–∑—É–µ–º –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é\n    setFiltersInUrl(null);\n  }, [setSearchParams, setFiltersInUrl]);\n\n  return {\n    toggleFilter,\n    isFilterAvailable: useCallback((filter: string) => {\n      if (!window.places?.length) return false;\n      \n      // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É —Ñ–∏–ª—å—Ç—Ä–∞ –º–µ—Å—Ç–∞ –≤ —Ç–µ–∫—É—â–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ\n      const urlFilter = searchParams.get('filter') || '';\n      const currentFilters = urlFilter ? urlFilter.split(',').filter(Boolean) : [];\n      \n      // –ï—Å–ª–∏ —Ñ–∏–ª—å—Ç—Ä —É–∂–µ –∞–∫—Ç–∏–≤–µ–Ω, –æ–Ω –¥–æ—Å—Ç—É–ø–µ–Ω\n      if (currentFilters.includes(filter)) {\n        return true;\n      }\n      \n      // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–º —Å—á–µ—Ç—á–∏–∫–∞–º\n      // filterCounts —É–∂–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–µ –∞–∫—Ç–∏–≤–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã\n      return filterCounts[filter] > 0;\n    }, [filterCounts, searchParams, window.places?.length]),\n    resetFilters\n  };\n};\n\n// –î–æ–±–∞–≤–ª—è–µ–º —Ç–∏–ø—ã –¥–ª—è window\ndeclare global {\n  interface Window {\n    filterStates: Map<string, boolean>;\n    removedFilters: Set<string>;\n    urlRemovedFilters: Set<string>;\n    places: Place[];\n  }\n}\n\nexport default useUrlFilters; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}