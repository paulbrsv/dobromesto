function Q(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();let b=null;function w(e){b&&u();const s=F();if(s[e]){const t=s[e],n=L.divIcon({className:"highlighted-marker",html:'<img src="https://paulbrsv.github.io/goodplaces/image/mark.svg" style="width: 48px; height: 48px;">',iconSize:[48,48],iconAnchor:[24,12]});t.setIcon(n),b=t,S().setView(t.getLatLng(),S().getZoom(),{animate:!0})}}function u(){if(b){const e=L.divIcon({className:"default-marker",html:'<div style="background-color: #3388ff; width: 10px; height: 10px; border-radius: 50%; border: 3px solid #ffffff; box-shadow: 0 0 0 2px #3388ff;"></div>',iconSize:[16,16],iconAnchor:[8,8]});b.setIcon(e),b=null}}function T(e,s){let t=e.querySelector(".custom-tooltip");t||(t=document.createElement("div"),t.className="custom-tooltip",t.textContent=s,e.appendChild(t));const n=e.getBoundingClientRect(),i=t.offsetWidth,o=window.innerWidth;t.style.top="-".concat(t.offsetHeight+5,"px");let r=(e.offsetWidth-i)/2;const l=n.left;l+r<0?r=-l+5:l+r+i>o&&(r=o-l-i-5),t.style.left="".concat(r,"px"),t.style.visibility="visible",setTimeout(()=>{t.style.visibility="hidden"},3e3)}function I(e){const s=e.querySelector(".custom-tooltip");s&&(s.style.visibility="hidden")}const y={specialty:'<img src="https://paulbrsv.github.io/goodplaces/image/coffee-pot.svg" alt="Specialty coffee" class="atr-icon">',desserts:'<img src="https://paulbrsv.github.io/goodplaces/image/cake.svg" alt="Desserts" class="atr-icon">',no_smoking:'<img src="https://paulbrsv.github.io/goodplaces/image/nosmoking.svg" alt="No smoking" class="atr-icon">',pets_allowed:'<img src="https://paulbrsv.github.io/goodplaces/image/dog.svg" alt="Pet friendly" class="atr-icon">',wine:'<img src="https://paulbrsv.github.io/goodplaces/image/wine.svg" alt="Wine" class="atr-icon">',beer:'<img src="https://paulbrsv.github.io/goodplaces/image/beer.svg" alt="Beer" class="atr-icon">',pet_friendly:'<img src="https://paulbrsv.github.io/goodplaces/image/dog.svg" alt="Pet friendly" class="atr-icon">',coffee_shop:'<img src="https://paulbrsv.github.io/goodplaces/image/coffee.svg" alt="Cafe" class="atr-icon">',snacks:'<img src="https://paulbrsv.github.io/goodplaces/image/sandwich.svg" alt="Snacks" class="atr-icon">',food:'<img src="https://paulbrsv.github.io/goodplaces/image/food.svg" alt="Snacks" class="atr-icon">',terrace:'<img src="https://paulbrsv.github.io/goodplaces/image/terrece.svg" alt="Terrace" class="atr-icon">'},P={no_smoking:"https://paulbrsv.github.io/goodplaces/image/nosmoking.svg",pets_allowed:"https://paulbrsv.github.io/goodplaces/image/dog.svg",smoke:"https://paulbrsv.github.io/goodplaces/image/smoke.svg",terrace:"https://paulbrsv.github.io/goodplaces/image/terrece.svg",coffee_shop:"https://paulbrsv.github.io/goodplaces/image/coffee.svg",specialty:"https://paulbrsv.github.io/goodplaces/image/coffee-pot.svg",food:"https://paulbrsv.github.io/goodplaces/image/food.svg",snacks:"https://paulbrsv.github.io/goodplaces/image/sandwich.svg",desserts:"https://paulbrsv.github.io/goodplaces/image/cake.svg",beer:"https://paulbrsv.github.io/goodplaces/image/beer.svg",wine:"https://paulbrsv.github.io/goodplaces/image/wine.svg"},q={no_smoking:{en:"A place where smoking is completely prohibited",ru:"Место, где курение полностью запрещено"},pets_allowed:{en:"Pets are allowed",ru:"Разрешено приводить домашних животных"},smoke:{en:"Separate non-smoking area available",ru:"Есть отдельная зона для некурящих"},terrace:{en:"Outdoor terrace for fresh air relaxation",ru:"Открытая терраса для отдыха на свежем воздухе"},coffee_shop:{en:"Regular coffee shop with basic drink options",ru:"Обычная кофейня с базовым выбором напитков"},specialty:{en:"Coffee shop with unique blends and specialty drinks",ru:"Кофейня с уникальными сортами кофе и авторскими напитками"},food:{en:"Full menu with hot dishes",ru:"Полноценное меню с горячими блюдами"},snacks:{en:"Light snacks to accompany drinks",ru:"Лёгкие закуски к напиткам"},desserts:{en:"Wide selection of sweets and pastries",ru:"Широкий выбор сладостей и выпечки"},beer:{en:"Offers a variety of beers",ru:"Предлагают пиво в ассортименте"},wine:{en:"Offers a selection of wines",ru:"Есть выбор вин"}},_={no_smoking:{en:"No smoking",ru:"No smoking"},pets_allowed:{en:"Pet friendly",ru:"Pet friendly"},smoke:{en:"Non-smoking area",ru:"Non-smoking area"},terrace:{en:"Terrace",ru:"Terrace"},coffee_shop:{en:"Coffee",ru:"Coffee"},specialty:{en:"Specialty coffee",ru:"Specialty"},food:{en:"Menu",ru:"Menu"},snacks:{en:"Snacks",ru:"Snacks"},desserts:{en:"Desserts",ru:"Desserts"},beer:{en:"Beer",ru:"Beer"},wine:{en:"Wine",ru:"Wine"}},v={headerTitle:{en:"DOBRO MESTO",ru:"ДОБРО МЕСТО"},showListButton:{en:"Show list",ru:"Показать список"},closeButton:{en:"Close",ru:"Закрыть"},moreFilters:{en:"More",ru:"Ещё"}},f={initialCoords:[45.2517,19.8389],initialZoom:14,tileLayerUrl:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",attribution:"© OpenStreetMap contributors & Carto"},p="en";function B(e){const s=document.getElementById("visible-places"),t=document.getElementById("outside-places");s.innerHTML="",t.innerHTML="";const n=S(),i=n.getBounds(),o=n.getCenter(),r=e.map(a=>{const c=L.latLng(a.lat,a.lng),m=o.distanceTo(c);return{...a,distance:m}}).sort((a,c)=>a.distance-c.distance);let l=null;r.forEach(a=>{const c=document.createElement("div");c.className="place",c.innerHTML='\n      <img src="'.concat(a.image,'" alt="').concat(a.name,'">\n      <div class="place-info">\n        <h3>').concat(a.name,"</h3>\n        <p>").concat(a.shirt_description||a.description,"</p>\n        <p>").concat(a.attributes.map(m=>y[m]||m).join(""),"</p>\n      </div>\n    "),c.onclick=()=>{if(window.innerWidth<=768)n.setView([a.lat,a.lng],17,{animate:!0}),H(a),N(),w(a.name);else{l&&(l.isPopupOpen()&&l.closePopup(),n.removeLayer(l),l=null);const m='\n          <div class="popup-content">\n            <img src="'.concat(a.image,'" alt="').concat(a.name,'">\n            <div class="popup-text">\n              <div class="popup-text-content">\n                <h3>').concat(a.name,"</h3>\n                <p>").concat(a.description,'</p>\n                <div class="popup-attributes">').concat(a.attributes.map(C=>y[C]||C).join(""),'</div>\n              </div>\n              <div class="popup-links">\n                <a href="').concat(a.instagram,'" target="_blank">\n                  <img src="https://paulbrsv.github.io/goodplaces/image/instagram.svg" alt="Instagram" class="icon">\n                </a>\n                <a href="').concat(a.maps_url,'" target="_blank">\n                  <img src="https://paulbrsv.github.io/goodplaces/image/google.svg" alt="Google Maps" class="icon">\n                </a>\n              </div>\n            </div>\n          </div>\n        ');l=L.marker([a.lat,a.lng],{icon:L.divIcon({className:"highlighted-marker",html:'<img src="https://paulbrsv.github.io/goodplaces/image/mark.svg" style="width: 48px; height: 48px;">',iconSize:[48,48],iconAnchor:[24,12]})}),l.bindPopup(m,{autoPan:!0,autoPanPaddingTopLeft:L.point(0,100),autoPanPaddingBottomRight:L.point(0,50)}),l.addTo(n).openPopup(),n.setView([a.lat,a.lng],17,{animate:!0}),w(a.name),l.on("popupclose",()=>{n.removeLayer(l),l=null,u()})}},i.contains([a.lat,a.lng])?s.appendChild(c):t.appendChild(c)})}function H(e){const s=document.getElementById("mobile-place-card"),t=s.querySelector(".mobile-place-card-header"),n=s.querySelector(".mobile-place-card-content"),i=e.attributes.map(o=>y[o]||o).join("");t.innerHTML='\n    <div class="mobile-place-card-attributes">'.concat(i,'</div>\n    <span class="close-card">✕</span>\n  '),n.innerHTML='\n    <img src="'.concat(e.image,'" alt="').concat(e.name,'">\n    <div class="popup-text">\n      <div class="popup-text-content">\n        <h3>').concat(e.name,"</h3>\n        <p>").concat(e.description,'</p>\n      </div>\n      <div class="popup-links">\n        <a href="').concat(e.instagram,'" target="_blank"><img src="https://paulbrsv.github.io/goodplaces/image/instagram.svg" alt="Instagram" class="icon"></a>\n        <a href="').concat(e.maps_url,'" target="_blank"><img src="https://paulbrsv.github.io/goodplaces/image/google.svg" alt="Google Maps" class="icon"></a>\n      </div>\n    </div>\n  '),s.classList.remove("hidden"),s.classList.add("active")}function N(){const e=document.getElementById("sidebar"),s=document.querySelector(".mobile-sidebar-close"),t=document.querySelector(".mobile-list-toggle");e.style.transform="translateX(-100%)",s.style.display="none",window.innerWidth<=768&&(t.style.display="block"),u()}let h,k=L.markerClusterGroup(),M={},E=[];function O(){h=L.map("map").setView(f.initialCoords,f.initialZoom),L.tileLayer(f.tileLayerUrl,{attribution:f.attribution}).addTo(h),h.addLayer(k),fetch("/places.json").then(e=>e.json()).then(e=>{E=e,x([])}).catch(e=>console.error("Ошибка загрузки данных:",e)),h.on("moveend",()=>{B(E.filter(e=>{const s=j();return s.length===0?!0:e.attributes.some(t=>s.includes(t))}))})}function x(e){k.clearLayers();const s=E.filter(t=>e.length===0?!0:e.every(n=>t.attributes.includes(n)));s.forEach(t=>{const n='\n      <div class="popup-content">\n        <img src="'.concat(t.image,'" alt="').concat(t.name,'">\n        <div class="popup-text">\n          <div class="popup-text-content">\n            <h3>').concat(t.name,"</h3>\n            <p>").concat(t.description,'</p>\n            <div class="popup-attributes">').concat(t.attributes.map(o=>y[o]||o).join(""),'</div>\n          </div>\n          <div class="popup-links">\n            <a href="').concat(t.instagram,'" target="_blank">\n              <img src="https://paulbrsv.github.io/goodplaces/image/instagram.svg" alt="Instagram" class="icon">\n            </a>\n            <a href="').concat(t.maps_url,'" target="_blank">\n              <img src="https://paulbrsv.github.io/goodplaces/image/google.svg" alt="Google Maps" class="icon">\n            </a>\n          </div>\n        </div>\n      </div>\n    '),i=L.marker([t.lat,t.lng],{icon:L.divIcon({className:"default-marker",html:'<div style="background-color: #3388ff; width: 10px; height: 10px; border-radius: 50%; border: 3px solid #ffffff; box-shadow: 0 0 0 2px #3388ff;"></div>',iconSize:[16,16],iconAnchor:[8,8]})});window.innerWidth>768?(i.bindPopup(n,{autoPan:!0,autoPanPaddingTopLeft:L.point(0,100),autoPanPaddingBottomRight:L.point(0,50)}),i.on("popupopen",()=>w(t.name)),i.on("popupclose",()=>u())):i.on("click",()=>{A(t),w(t.name)}),k.addLayer(i),M[t.name]=i}),h.addLayer(k),B(s),W(s)}function W(e){document.querySelectorAll(".filter").forEach(s=>{const t=s.dataset.filter,n=e.filter(o=>o.attributes.includes(t)).length;let i=s.querySelector(".filter-count");i||(i=document.createElement("div"),i.classList.add("filter-count"),s.appendChild(i)),i.textContent=n})}function A(e){const s=document.getElementById("mobile-place-card"),t=s.querySelector(".mobile-place-card-header"),n=s.querySelector(".mobile-place-card-content"),i=e.attributes.map(o=>y[o]||o).join("");t.innerHTML='\n    <div class="mobile-place-card-attributes">'.concat(i,'</div>\n    <span class="close-card">✕</span>\n  '),n.innerHTML='\n    <img src="'.concat(e.image,'" alt="').concat(e.name,'">\n    <div class="popup-text">\n      <div class="popup-text-content">\n        <h3>').concat(e.name,"</h3>\n        <p>").concat(e.description,'</p>\n      </div>\n      <div class="popup-links">\n        <a href="').concat(e.instagram,'" target="_blank"><img src="https://paulbrsv.github.io/goodplaces/image/instagram.svg" alt="Instagram" class="icon"></a>\n        <a href="').concat(e.maps_url,'" target="_blank"><img src="https://paulbrsv.github.io/goodplaces/image/google.svg" alt="Google Maps" class="icon"></a>\n      </div>\n    </div>\n  '),s.classList.remove("hidden"),s.classList.add("active")}function F(){return M}function S(){return h}let d=[];function R(){document.querySelectorAll(".filter").forEach(e=>{const s=e.dataset.filter;if(!s)return;e.innerHTML="";const t=document.createElement("span");t.className="filter-icon-wrapper";const n=document.createElement("img");n.src=P[s],n.alt=_[s][p],n.className="filter-icon",t.appendChild(n),e.appendChild(t),e.appendChild(document.createTextNode(_[s][p])),e.addEventListener("click",()=>{d.includes(s)?(d=d.filter(i=>i!==s),e.classList.remove("active")):(d.push(s),e.classList.add("active")),u(),x(d)})}),document.querySelectorAll(".filter-reset").forEach(e=>{e.addEventListener("click",()=>{d=[],document.querySelectorAll(".filter").forEach(s=>s.classList.remove("active")),u(),S().setView(f.initialCoords,f.initialZoom),x(d)})})}function j(){return d}function z(){document.querySelector(".mobile-list-toggle").addEventListener("click",()=>{const t=document.getElementById("sidebar"),n=document.querySelector(".mobile-sidebar-close");t.style.transform==="translateX(-100%)"||t.classList.contains("hidden-mobile")?(t.style.transform="translateX(0)",t.classList.remove("hidden-mobile"),t.scrollTop=0,window.innerWidth<=768&&(n.style.display="flex",document.querySelector(".mobile-list-toggle").style.display="none")):$()}),document.querySelector(".mobile-sidebar-close").addEventListener("click",$),document.getElementById("mobile-place-card").addEventListener("click",t=>{if(t.target.classList.contains("close-card")){const n=document.getElementById("mobile-place-card");n.classList.remove("active"),setTimeout(()=>{n.classList.add("hidden"),u()},300)}});const e=document.querySelector(".mobile-list-toggle"),s=()=>{window.innerWidth>768?e.style.display="none":e.style.display="block"};s(),window.addEventListener("resize",s)}function $(){const e=document.getElementById("sidebar"),s=document.querySelector(".mobile-sidebar-close"),t=document.querySelector(".mobile-list-toggle");e.style.transform="translateX(-100%)",s.style.display="none",window.innerWidth<=768&&(t.style.display="block"),u()}function D(){document.querySelector(".more-filters-btn").addEventListener("click",()=>{document.getElementById("more-filters-modal").classList.remove("hidden")}),document.querySelector(".close-modal").addEventListener("click",()=>{document.getElementById("more-filters-modal").classList.add("hidden")})}const V='<header>\n  <h1>DOBRO MESTO</h1>\n  <div id="filters-placeholder"></div>\n</header>\n',G='<div class="filters">\n  <div class="filters-mobile">\n    <div class="filter-row">\n      <span class="filter" data-filter="no_smoking"></span>\n      <span class="filter" data-filter="pets_allowed"></span>\n      <span class="more-filters-btn">\n        <!-- Текст "Ещё" добавится через JS -->\n      </span>\n    </div>\n    <div class="filter-row">\n      <span class="filter" data-filter="coffee_shop"></span>\n      <span class="filter" data-filter="specialty"></span>\n      <span class="filter-reset">\n        <img src="https://paulbrsv.github.io/goodplaces/image/reset.svg" alt="Reset" class="filter-icon">\n      </span>\n    </div>\n  </div>\n  <div class="filters-left">\n    <span class="filter" data-filter="no_smoking"></span>\n    <span class="filter" data-filter="pets_allowed"></span>\n    <span class="filter" data-filter="smoke"></span>\n    <span class="filter" data-filter="terrace"></span>\n  </div>\n  <span class="filter-divider"></span>\n  <div class="filters-right">\n    <span class="filter" data-filter="coffee_shop"></span>\n    <span class="filter" data-filter="specialty"></span>\n    <span class="filter" data-filter="food"></span>\n    <span class="filter" data-filter="snacks"></span>\n    <span class="filter" data-filter="desserts"></span>\n    <span class="filter" data-filter="beer"></span>\n    <span class="filter" data-filter="wine"></span>\n  </div>\n  <span class="filter-reset desktop-reset">\n    <img src="https://paulbrsv.github.io/goodplaces/image/reset.svg" alt="Reset" class="filter-icon">\n  </span>\n</div>\n',X='<div id="sidebar" class="hidden-mobile">\n  <div class="place-list">\n    <h3>В этом районе</h3>\n    <div id="visible-places"></div>\n  </div>\n  <div class="place-list">\n    <h3>📍 Ещё рядом</h3>\n    <div id="outside-places"></div>\n  </div>\n</div>\n',Z='<div id="map"></div>\n',U='<button class="mobile-sidebar-close" style="display: none;">\n  <img src="https://paulbrsv.github.io/goodplaces/image/close.svg" alt="Close" class="icon">\n  Закрыть\n</button>\n<div class="mobile-list-toggle">\n  <img src="https://paulbrsv.github.io/goodplaces/image/list.svg" alt="List" class="icon">\n  Показать список\n</div>\n<div id="mobile-place-card" class="mobile-place-card hidden">\n  <div class="mobile-place-card-header">\n    <div class="mobile-place-card-attributes"></div>\n    <span class="close-card">✕</span>\n  </div>\n  <div class="mobile-place-card-content"></div>\n</div>\n',J='<div id="more-filters-modal" class="modal hidden">\n  <div class="modal-content">\n    <span class="close-modal">✕</span>\n    <div class="extra-filters">\n      <div class="extra-filters-top">\n        <span class="filter" data-filter="smoke"></span>\n        <span class="filter" data-filter="terrace"></span>\n      </div>\n      <span class="filter-divider-horizontal"></span>\n      <div class="extra-filters-bottom">\n        <span class="filter" data-filter="food"></span>\n        <span class="filter" data-filter="snacks"></span>\n        <span class="filter" data-filter="desserts"></span>\n        <span class="filter" data-filter="beer"></span>\n        <span class="filter" data-filter="wine"></span>\n      </div>\n    </div>\n  </div>\n</div>\n';function g(e,s){document.getElementById(e).innerHTML=s}async function K(){g("header-container",V),g("filters-container",G),g("sidebar-container",X),g("map-container",Z),g("mobile-container",U),g("modal-container",J);const e=document.getElementById("filters-container");document.getElementById("filters-placeholder").appendChild(e.querySelector(".filters")),e.innerHTML="",document.querySelector("h1").textContent=v.headerTitle[p],document.querySelector(".mobile-list-toggle").lastChild.textContent=v.showListButton[p],document.querySelector(".mobile-sidebar-close").lastChild.textContent=v.closeButton[p];const t=document.querySelector(".more-filters-btn");t.innerHTML="";const n=document.createElement("img");n.src="https://paulbrsv.github.io/goodplaces/image/more.svg",n.alt=v.moreFilters[p],n.className="filter-icon",t.appendChild(n),t.appendChild(document.createTextNode(v.moreFilters[p])),R(),O(),z(),D(),document.querySelectorAll(".filter").forEach(o=>{const r=o.dataset.filter;if(!r)return;const l=q[r][p]||"Описание отсутствует";o.addEventListener("mouseenter",()=>T(o,l)),o.addEventListener("mouseleave",()=>I(o))})}document.addEventListener("DOMContentLoaded",K);export{Q as __vite_legacy_guard};
